"<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Niks' Birthday — A Little Surprise</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Kalam&family=Nunito:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Favicon: small pink heart emoji as SVG data URL -->
    <link rel="icon" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="86" font-size="90">💗</text></svg>'>

    <style>
        :root{
            --bg1:#ffeef6; /* pink */
            --bg2:#f3f0ff; /* lavender */
            --bg3:#e8fff6; /* mint */
            --card: rgba(255,255,255,0.75);
            --accent:#b984e8;
            --soft-shadow: 0 8px 20px rgba(18,18,18,0.08);
            --radius:18px;
            --transition-time:0.4s;
            --btn-scale-hover:1.05;
            --btn-scale-active:0.9;
            --font-body: "Nunito", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            --font-head: "Fredoka One", "Nunito", sans-serif;
        }

        /* Subtle animated gradient background */
        body{
            margin:0;
            min-height:100vh;
            font-family:var(--font-body);
            background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3));
            background-size: 300% 300%;
            animation: bgmove 15s ease infinite;
            -webkit-font-smoothing:antialiased;
            color:#2b2730;
            -webkit-tap-highlight-color: transparent;
        }
        @keyframes bgmove{
            0%{background-position:0% 50%}
            50%{background-position:100% 50%}
            100%{background-position:0% 50%}
        }

        /* Global layout */
        .app{
            max-width:920px;
            margin: 32px auto;
            padding: 18px;
            box-sizing:border-box;
        }
        .stage{
            position:relative;
            min-height:70vh;
            border-radius: 22px;
            padding: 28px;
            box-shadow: var(--soft-shadow);
            background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.35));
            overflow: hidden;
        }

        /* Pages - hidden containers */
        .page{
            position:absolute;
            inset:0;
            padding:20px;
            display:flex;
            align-items:center;
            justify-content:center;
            flex-direction:column;
            opacity:0;
            pointer-events:none;
            transform:translateY(10px);
            transition: opacity var(--transition-time) ease, transform var(--transition-time) ease;
        }
        .page.active{
            opacity:1;
            pointer-events:auto;
            transform:translateY(0);
        }
        /* gentle fade out/in when switching */
        .fade-out{
            opacity:0 !important;
            transition: opacity calc(var(--transition-time)) ease, transform calc(var(--transition-time)) ease;
            transform:translateY(10px);
        }

        /* Buttons */
        .btn{
            font-family:var(--font-head);
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.6));
            border: none;
            padding:12px 20px;
            border-radius: 14px;
            cursor:pointer;
            box-shadow: var(--soft-shadow);
            transition: transform 160ms cubic-bezier(.2,.9,.2,1), box-shadow 160ms;
            will-change: transform;
            user-select:none;
            outline:none;
        }
        .btn:focus{ box-shadow: 0 0 0 4px rgba(185,132,232,0.18); }
        .btn:hover{ transform: scale(var(--btn-scale-hover)); }
        .btn:active{ transform: scale(var(--btn-scale-active)); }

        .p1-message{
            font-family:var(--font-head);
            font-size:clamp(20px,5vw,34px);
            text-align:center;
            color:#3b2f45;
            line-height:1.1;
            margin-bottom:18px;
        }

        /* Page 2 layout */
        .p2-wrap{
            display:flex;
            gap:18px;
            align-items:center;
            width:100%;
            max-width:920px;
            flex-wrap:wrap;
            justify-content:center;
        }
        .qr{
            width:220px; height:220px;
            border-radius:16px;
            overflow:hidden;
            box-shadow: 0 12px 30px rgba(0,0,0,0.08);
            display:flex;
            align-items:center;
            justify-content:center;
            background:linear-gradient(180deg, #fff, #f8f8ff);
            position:relative;
        }
        .qr img{
            width:100%;
            height:100%;
            object-fit:cover;
            display:block;
            filter: blur(6px);
            transform:scale(1.02);
            transition: filter 350ms ease, transform 350ms ease;
        }
        .qr img.loaded{ filter: blur(0); transform:scale(1); }

        .p2-text{
            max-width:520px;
            font-family: "Kalam", var(--font-body);
            font-size:clamp(14px, 2.4vw, 18px);
            background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
            padding:16px 18px;
            border-radius:14px;
            box-shadow: var(--soft-shadow);
            color:#2b2730;
            line-height:1.45;
        }

        /* floating music note */
        .music-note{
            position:absolute;
            right:26px;
            bottom:26px;
            width:48px; height:48px;
            display:flex;
            align-items:center;
            justify-content:center;
            background:rgba(255,255,255,0.8);
            border-radius:50%;
            box-shadow: var(--soft-shadow);
            font-size:22px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse{
            0%{ transform:scale(1) }
            50%{ transform:scale(1.08) }
            100%{ transform:scale(1) }
        }

        /* Page 3 card */
        .card{
            max-width:820px;
            background: linear-gradient(180deg, rgba(235,224,255,0.65), rgba(245,240,255,0.55));
            border-radius:18px;
            padding:20px;
            box-shadow: var(--soft-shadow);
            color:#231f2a;
            line-height:1.6;
            font-size:clamp(14px,2.4vw,16px);
        }
        .card p{ margin:10px 0; }

        /* inline tiny icons */
        .fact-icon{ margin-right:8px; font-size:16px; vertical-align:middle; }

        /* Page 4: cards for mini-game */
        .three-cards{
            display:flex;
            gap:12px;
            flex-wrap:wrap;
            align-items:center;
            justify-content:center;
        }
        .mini-card{
            width:240px;
            min-height:120px;
            background: linear-gradient(180deg, #fff, rgba(255,255,255,0.9));
            border-radius:14px;
            padding:12px;
            box-shadow: var(--soft-shadow);
            cursor:pointer;
            transition: transform 200ms ease, box-shadow 200ms;
            user-select:none;
            border: 2px solid transparent;
        }
        .mini-card:hover{ transform:translateY(-6px) scale(1.02); box-shadow: 0 18px 40px rgba(0,0,0,0.08); }
        .mini-card:focus{ outline:none; box-shadow:0 0 0 4px rgba(185,132,232,0.18); }

        .sticky-note{
            margin-top:18px;
            background:#fff7c2;
            padding:12px 14px;
            border-radius:12px;
            box-shadow: 0 8px 22px rgba(0,0,0,0.08);
            font-family:var(--font-body);
        }

        /* Page 5 final text */
        .final{
            max-width:760px;
            text-align:center;
            font-size:clamp(15px,2.6vw,18px);
            color:#2b2730;
            background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.5));
            padding:20px;
            border-radius:16px;
            box-shadow: var(--soft-shadow);
        }

        /* Confetti canvas top layer */
        #confetti-canvas{
            position:absolute; inset:0; pointer-events:none; z-index:9999;
        }

        /* Mochi rain container */
        .mochi-rain{
            position:absolute; inset:0; pointer-events:none; z-index:9998; overflow:hidden;
        }
        .mochi{
            position:absolute;
            width:36px;
            height:36px;
            transform-origin:center;
            will-change: transform, top, left;
            pointer-events:none;
            font-size:22px;
            display:flex; align-items:center; justify-content:center;
        }

        /* Accessibility: focus ring for keyboard nav */
        [tabindex]:focus{ box-shadow:0 0 0 4px rgba(185,132,232,0.18); outline:none; }

        /* Responsive */
        @media (max-width:720px){
            .p2-wrap{ flex-direction:column; }
            .qr{ width:180px; height:180px;}
            .three-cards{ flex-direction:column; }
        }

        /* tiny helper */
        .visually-hidden{ position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }
    </style>
</head>
<body>
<div class="app" role="application" aria-label="Niks Birthday App">
    <div class="stage" id="stage">
        <!-- Shared audio (hidden) -->
        <audio id="bg-audio" preload="auto" aria-hidden="true"></audio>

        <!-- Confetti canvas -->
        <canvas id="confetti-canvas" aria-hidden="true"></canvas>

        <!-- Mochi rain container -->
        <div class="mochi-rain" id="mochi-rain" aria-hidden="true"></div>

        <!-- PAGE 1: Landing -->
        <section id="page1" class="page active" role="region" aria-labelledby="p1-title">
            <div class="p1-message" id="p1-title">Hi Niks, if you’re seeing this… Happy Birthday 💜</div>
            <button id="p1-btn" class="btn" aria-pressed="false" aria-label="Ready button">Ready ka na ba?</button>
            <div style="height:16px"></div>
            <!-- Continue button appears only after clicks -->
            <button id="p1-continue" class="btn" style="display:none;margin-top:10px" aria-hidden="true">Continue</button>
        </section>

        <!-- PAGE 2: Spotify Playlist -->
        <section id="page2" class="page" role="region" aria-labelledby="p2-title">
            <div class="p2-wrap" style="position:relative;">
                <!-- QR code -->
                <div class="qr" aria-hidden="false" aria-label="Spotify QR code">
                    <img
                            src="url_qrcodecreator.com_06_20_43.png"
                            alt="Spotify playlist QR code"
                            loading="lazy"
                            onload="this.classList.add('loaded')"
                    />
                </div>

                <!-- Message -->
                <div class="p2-text" id="p2-title" tabindex="0" aria-label="Playlist message">
                    Hi Niks, you're probably wondering why I did this.
                    In my thoughts, since it's your first birthday with me,
                    I wanted to make it special—make you feel special on your special day.
                    Since we both love music so much, here’s a Spotify playlist I personally made, hehe.
                    Let me know what you noticed!
                </div>

                <!-- Floating music note -->
                <div class="music-note" title="Music note" aria-hidden="true">♪</div>
            </div>

            <div style="height:18px"></div>
            <button id="p2-next" class="btn" aria-label="Next to page 3">Next</button>
        </section>

        <!-- PAGE 3: Get to Know Josh -->
        <section id="page3" class="page" role="region" aria-labelledby="p3-title">
            <div class="card" id="p3-title" tabindex="0" aria-label="About Joshua">
                <p><strong style="font-family:var(--font-head)">Hi Niks,</strong> since we only just met I realized you don't know much about me, and I didn't really properly introduced myself to you.</p>
                <p>My Name is <strong>Joshua David D. Catacutan</strong>, I am 21 years old born in August 13 2003.</p>
                <p><span class="fact-icon">👩‍👦</span>I have an older sister that is 12 year older than me, I only have my mom now because my dad is gone off to heaven.</p>
                <p><span class="fact-icon">💼</span>I am a workaholic as you know I have 3 jobs because I am afraid to be broke.</p>
                <p><span class="fact-icon">🎧</span>I love music, watching anime, reading manga or manwha or any asian drawings actually.</p>
                <p><span class="fact-icon">✈️</span>I love travelling and I hope we can travel together soon hehe.</p>
                <p>This is just a brief overview of me, and I hope I can get to know you more also.</p>
            </div>

            <div style="height:18px"></div>
            <button id="p3-next" class="btn" aria-label="Next to mini-game">Next</button>
        </section>

        <!-- PAGE 4: Interactive Mini-Game -->
        <section id="page4" class="page" role="region" aria-labelledby="p4-title">
            <div style="text-align:center;margin-bottom:12px">
                <h2 id="p4-title" style="font-family:var(--font-head);margin:0">Two Truths & a Lie — Josh Edition</h2>
                <div style="font-size:13px;color:#5e5460">Click the card that you think is the lie</div>
            </div>

            <div class="three-cards" role="list">
                <div class="mini-card" role="button" tabindex="0" data-id="1" aria-label="Card 1">I was diagnosed with 8 months to live If i yet to find a treatment for my sickness</div>
                <div class="mini-card" role="button" tabindex="0" data-id="2" aria-label="Card 2">My favorite fragrance is Wulong Cha by Nishane</div>
                <div class="mini-card" role="button" tabindex="0" data-id="3" aria-label="Card 3">I’m secretly afraid of butterflies.</div>
            </div>

            <div id="sticky-area" style="width:100%;display:flex;justify-content:center"></div>
        </section>

        <!-- PAGE 5: Bible Verse & Closing -->
        <section id="page5" class="page" role="region" aria-labelledby="p5-title">
            <div class="final" id="p5-title" tabindex="0">
                <p><em>There's a lot I want to say but this bible verse summarizes it for me,</em></p>
                <p style="font-weight:700">Matthew 7:7</p>
                <p style="font-size:18px">Ask, and it will be given to you; seek, and you will find; knock, and it will be opened to you.</p>
                <p>I came at an unexpected time but I am glad I can be apart of your 25th. This opens a new chapter for us both, and I hope it's you this time because I don't want anyone else but you and you alone</p>
                <p style="margin-top:10px">Happy birthday Niks</p>
                <p style="margin-top:6px">Truly yours — <strong>David</strong></p>
            </div>
        </section>

    </div>
</div>

<div class="visually-hidden" aria-hidden="true" id="aria-status"></div>

<script>
    /* Accessibility helper */
    function announce(msg){
        const el = document.getElementById('aria-status');
        el.textContent = msg;
    }

    /* Simple page manager with fade transitions (~0.4s) */
    const pages = ['page1','page2','page3','page4','page5'];
    let current = 0;
    const transitionTime = 400; // ms, match CSS

    function showPage(idx){
        if(idx<0 || idx>=pages.length) return;
        const old = document.getElementById(pages[current]);
        const neu = document.getElementById(pages[idx]);
        if(old === neu) return;
        // fade out old
        old.classList.remove('active');
        old.classList.add('fade-out');
        setTimeout(()=> old.classList.remove('fade-out'), transitionTime);
        // show new
        neu.classList.add('active');
        neu.focus && neu.focus();
        current = idx;
        announce('Page ' + (idx+1) + ' displayed');
    }

    /* PAGE 1 logic */
    const p1Btn = document.getElementById('p1-btn');
    const p1Cont = document.getElementById('p1-continue');
    let p1Clicks = 0;
    p1Btn.addEventListener('click', ()=>{
        p1Clicks++;
        if(p1Clicks===1){
            p1Btn.textContent = 'Sure ka ba?';
            p1Btn.setAttribute('aria-pressed','true');
        } else if(p1Clicks===2){
            p1Btn.textContent = 'hehe enjoy';
            p1Cont.style.display = 'inline-block';
            p1Cont.setAttribute('aria-hidden','false');
        } else {
            // do nothing more
        }
    });
    p1Btn.addEventListener('keydown',(e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); p1Btn.click(); }});
    p1Cont.addEventListener('click', ()=> showPage(1));

    /* PAGE 2: lazy-load QR image with blur-up effect */
    document.addEventListener('DOMContentLoaded', ()=> {
        const qrImg = document.querySelector('.qr img');
        function loadImg(){
            const src = qrImg.getAttribute('data-src');
            if(!src) return;
            qrImg.src = src;
            qrImg.onload = ()=>{ qrImg.classList.add('loaded'); };
        }
        // small timeout to simulate lazy
        setTimeout(loadImg, 250);
    });

    /* Page2 Next */
    document.getElementById('p2-next').addEventListener('click', ()=> showPage(2));

    /* Page3 Next */
    document.getElementById('p3-next').addEventListener('click', ()=> showPage(3));

    /* Page4 mini-game logic */
    const miniCards = document.querySelectorAll('.mini-card');
    let gameSelected = false;
    const confettiCanvas = document.getElementById('confetti-canvas');
    const confettiCtx = confettiCanvas.getContext('2d');
    let confettiParticles = [];

    function resizeCanvas(){
        confettiCanvas.width = confettiCanvas.offsetWidth;
        confettiCanvas.height = confettiCanvas.offsetHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function spawnConfetti(x, y, count=40){
        const w = confettiCanvas.width, h = confettiCanvas.height;
        for(let i=0;i<count;i++){
            confettiParticles.push({
                x: x + (Math.random()-0.5)*40,
                y: y + (Math.random()-0.5)*40,
                vx: (Math.random()-0.5)*6,
                vy: -Math.random()*6 - 2,
                r: Math.random()*6+4,
                color: ['#FFD1DC','#C7B8F5','#B7E4D6','#FFE9B5'][Math.floor(Math.random()*4)],
                life: Math.random()*60+40
            });
        }
    }

    function updateConfetti(){
        confettiCtx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        confettiParticles.forEach((p, i)=>{
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.18; // gravity
            p.life--;
            confettiCtx.fillStyle = p.color;
            confettiCtx.beginPath();
            confettiCtx.ellipse(p.x, p.y, p.r, p.r*0.7, 0, 0, Math.PI*2);
            confettiCtx.fill();
        });
        confettiParticles = confettiParticles.filter(p=>p.life>0 && p.y < confettiCanvas.height+50);
        requestAnimationFrame(updateConfetti);
    }
    updateConfetti();

    miniCards.forEach(card=>{
        function choose(){
            if(gameSelected) return;
            gameSelected = true;
            const id = card.getAttribute('data-id');
            // determine if chosen correct (they want #3 to be lie). If id==3 => success
            if(id === '3'){
                // burst confetti at center of stage
                const rect = card.getBoundingClientRect();
                const stageRect = document.getElementById('stage').getBoundingClientRect();
                const x = rect.left - stageRect.left + rect.width/2;
                const y = rect.top - stageRect.top + rect.height/2;
                spawnConfetti(x, y, 80);
            } else {
                // small subtle shake if wrong
                card.style.transform = 'translateY(-4px) rotate(-2deg)';
                setTimeout(()=> card.style.transform = '', 300);
            }
            // show sticky note and Next
            const stickyArea = document.getElementById('sticky-area');
            const note = document.createElement('div');
            note.className = 'sticky-note';
            note.setAttribute('role','status');
            note.innerHTML = 'Hehe the lie was <strong>#3</strong> 😊 <div style="margin-top:8px"><button id="p4-next" class="btn">Next</button></div>';
            stickyArea.appendChild(note);
            announce('You selected card ' + id + '. The lie was #3.');
            document.getElementById('p4-next').addEventListener('click', ()=> showPage(4));
        }
        card.addEventListener('click', choose);
        card.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); choose(); }});
    });

    /* PAGE 5 is index 4 in pages array (showPage(4) already used earlier) */

    /* Keyboard navigation: allow arrow keys to move pages for convenience */
    document.addEventListener('keydown', (e)=>{
        if(e.key === 'ArrowRight') { if(current < pages.length-1) showPage(current+1); }
        if(e.key === 'ArrowLeft') { if(current > 0) showPage(current-1); }
    });

    /* Tiny confetti: already implemented with canvas */

    /* Mochi Easter egg: typing "mochi" triggers mochi rain */
    let typed = '';
    const secret = 'mochi';
    const mochiContainer = document.getElementById('mochi-rain');
    function spawnMochi() {
        const count = 24;
        const w = window.innerWidth;
        for(let i=0;i<count;i++){
            const el = document.createElement('div');
            el.className = 'mochi';
            // cute mochi face using emoji-like SVG as innerHTML for more appealing look
            el.innerHTML = '<svg viewBox="0 0 64 64" width="36" height="36" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#fff"/><stop offset="1" stop-color="#FFDDED"/></linearGradient></defs><rect rx="10" ry="10" width="64" height="64" fill="url(%23g)"/><circle cx="20" cy="28" r="4" fill="#3b2f45"/><circle cx="44" cy="28" r="4" fill="#3b2f45"/><path d="M22 38 Q32 46 42 38" stroke="#3b2f45" stroke-width="2" fill="none" stroke-linecap="round"/></svg>';
            el.style.left = Math.random() * (mochiContainer.offsetWidth - 40) + 'px';
            el.style.top = -40 + 'px';
            el.style.opacity = '0';
            mochiContainer.appendChild(el);
            // animate fall
            const delay = Math.random()*800;
            setTimeout(()=>{
                el.style.transition = 'transform 2.6s linear, opacity 600ms';
                el.style.opacity = '1';
                el.style.transform = 'translateY(' + (window.innerHeight + 80) + 'px) rotate(' + (Math.random()*360) + 'deg)';
            }, delay);
            // cleanup
            setTimeout(()=> el.remove(), 4000 + delay);
        }
    }

    /* Listen for key sequences globally */
    document.addEventListener('keydown', (e)=>{
        // accept letters only
        if(e.key && e.key.length === 1){
            typed += e.key.toLowerCase();
            if(typed.length > secret.length) typed = typed.slice(-secret.length);
            if(typed === secret){
                spawnMochi();
                announce('Mochi rain activated!');
                typed = '';
            }
        }
    });

    /* Ensure all interactive elements have keyboard focus style and ARIA labels handled above */

    /* Lazy enhancement: audio play toggle on double-click stage (optional fun) */
    const stage = document.getElementById('stage');
    const bgAudio = document.getElementById('bg-audio');
    // We'll not add audio source to avoid autoplay issues; user can drop audio by interacting.
    // But still provide play/pause when double-clicking stage: toggles silent to prevent intrusive sound.
    stage.addEventListener('dblclick', ()=>{
        if(bgAudio.paused){ bgAudio.play().catch(()=>{}); announce('Audio play requested'); }
        else{ bgAudio.pause(); announce('Audio paused'); }
    });

    /* Small improvement: focus the first page's main button for keyboard users */
    p1Btn.focus();

    /* Prevent accidental selection on long-press for cards */
    document.querySelectorAll('.mini-card, .btn').forEach(el=>{
        el.addEventListener('mousedown', (e)=> e.preventDefault());
    });

    /* Respect reduced-motion preference: shorten or disable pulsing if requested */
    const mm = window.matchMedia('(prefers-reduced-motion: reduce)');
    if(mm.matches){
        document.querySelectorAll('.music-note').forEach(n=> n.style.animation = 'none');
    }

    /* Ensure images with loading=lazy still accessible */
    document.querySelectorAll('img[loading="lazy"]').forEach(img=>{
        img.addEventListener('error', ()=> img.style.display='none');
    });

    /* tiny helpful hint: add tooltips on hover for buttons */
    [...document.querySelectorAll('.btn')].forEach(b=>{
        b.setAttribute('aria-live','polite');
    });

    /* Final safety: announce initial page */
    announce('Welcome! Page 1 displayed');

    /* Prevent background scroll when confetti or mochi are active - not necessary but keep stable */
</script>
</body>
</html>
"